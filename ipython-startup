#!/usr/bin/env python
# coding: utf-8

import os
import logging

from glob import glob
from sudoku import solve
from sudoku.const import ELEMENT_VALUES as EV
from sudoku import get_puzzles

log = logging.getLogger('ipy')

def reload_puzzles():
    global P, A, Q
    P = list()

    for file in glob('t/asset/p*.txt'):
        bname = os.path.basename(file)[:-4]
        P.extend(get_puzzles(file))

    P.extend(get_puzzles()) # default is ./Puzzles.txt

    for i,p in enumerate(P):
        globals()[f'p{i}'] = p

    Q = [ solve(p) for p in P ]

    for i,q in enumerate(Q):
        globals()[f'q{i}'] = q

    log.debug("loaded %d puzzles in 'P' and 'p0' … 'pN'", len(P))
    log.debug("loaded %d corresponding solutions in 'Q' and 'q0' … 'qN'", len(Q))

reload_puzzles()
